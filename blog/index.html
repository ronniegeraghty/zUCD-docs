<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/zUCD-docs/blog/rss.xml" title="zUCD Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zUCD-docs/blog/atom.xml" title="zUCD Docs Blog Atom Feed"><title data-react-helmet="true">Blog | zUCD Docs</title><meta data-react-helmet="true" property="og:title" content="Blog | zUCD Docs"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://ronniegeraghty.github.io/zUCD-docs/blog"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="shortcut icon" href="/zUCD-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ronniegeraghty.github.io/zUCD-docs/blog"><link data-react-helmet="true" rel="alternate" href="https://ronniegeraghty.github.io/zUCD-docs/blog" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ronniegeraghty.github.io/zUCD-docs/blog" hreflang="x-default"><link rel="stylesheet" href="/zUCD-docs/assets/css/styles.a8bcac8e.css">
<link rel="preload" href="/zUCD-docs/assets/js/runtime~main.e160fb1e.js" as="script">
<link rel="preload" href="/zUCD-docs/assets/js/main.70779efb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zUCD-docs/"><img src="/zUCD-docs/img/deploy.png" alt="zUCD Docs Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zUCD-docs/img/deploy.png" alt="zUCD Docs Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">zUCD Docs</b></a><a class="navbar__item navbar__link" href="/zUCD-docs/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zUCD-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ronniegeraghty/zUCD-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/zUCD-docs/"><img src="/zUCD-docs/img/deploy.png" alt="zUCD Docs Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zUCD-docs/img/deploy.png" alt="zUCD Docs Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">zUCD Docs</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/zUCD-docs/docs/intro">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/zUCD-docs/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/ronniegeraghty/zUCD-docs" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zUCD-docs/blog/20211104-handling-new-cics-loads-in-ucd">Handling New CICS LOADs in UCD</a></li></ul></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="blogPostTitle_GeHD"><a href="/zUCD-docs/blog/20211104-handling-new-cics-loads-in-ucd">Handling New CICS LOADs in UCD</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-11-04T00:00:00.000Z">November 4, 2021</time> Â· 5 min read</div><div class="avatar margin-vert--md"><a href="https://github.com/ronniegeraghty" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/28957151?v=4" alt="Ronnie Geraghty"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/ronniegeraghty" target="_blank" rel="noopener noreferrer">Ronnie Geraghty</a></div><small class="avatar__subtitle">Z DevOps Technical Specialsit @ IBM</small></div></div></header><div class="markdown"><header><h1 class="h1Heading_27L5"><em>~</em>In Progress<em>~</em></h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>In this blog post we&#x27;ll look at how to set up an UrbanCode Deploy (UCD)Process that handles deploying an updated to a CICS application, where the incremental version contains updates to Load Modules already loaded into the CICS Region as well as Load Modules that are new and thus not loaded into the CICS Region yet. The UCD process will handle generating a list of CICS specific Load Modules in the incremental version we are deploying, using this list to check which of the Load Modules have been loaded into CICS already then generating a list of these already loaded Load Modules, then running NEWCOPYs on the new version on these already loaded Load Modules. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="contents"></a>Contents<a class="hash-link" href="#contents" title="Direct link to heading">#</a></h3><ul><li><a href="#background-info">Background Info</a></li><li><a href="#the-component-version">The Component Version</a></li><li><a href="#the-process">The Process</a><ul><li><a href="#generate-program-list">Generate Program List</a></li><li><a href="#check-if-new-member">check-if-new-member</a></li><li><a href="#if-cics-loads-to-newcopy">if cics loads to newcopy</a></li><li><a href="#newcoyp-programs">NEWCOYP Programs</a></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="background-info"></a>Background Info<a class="hash-link" href="#background-info" title="Direct link to heading">#</a></h2><p>For this blog post I used an incremental version of a basic sample insureance application that uses CICS and Db2. The incremental version of this application was built using Dependency Based Build (DBB) and the zAppBuild Framework. This information is important because during the DBB build the zAppBuild Framework assigns a property know as the DeployType to each artifact produced. For example, a program that uses CICS and Db2 would produce a DBRM and a CICS Load Module. The zAppBuild Framework would assign the DBRM artifact a Deploy Type of DBRM and the CICS Load Module artifact a Deploy Type of LOAD. I then use this Deploy Type property in the UCD process to generate lists of specific artifact types. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-component-version"></a>The Component Version<a class="hash-link" href="#the-component-version" title="Direct link to heading">#</a></h2><p><img alt="UCD Component Version Screenshot" src="/zUCD-docs/assets/images/ucd-component-version-64331c0d538c25c39de1404a3ffbcbd1.png">
Above is a screen shot of the component version used in my deployment process. You can see the version has 2 PDSs <code>IBMUSER.DBB.GENAPP.DBRM</code> &amp; <code>IBMUSER.DBB.GENAPP.LOAD</code>, that each contain 4 members. Note that the members in <code>IBMUSER.DBB.GENAPP.DBRM</code>are all DBRMs and thus have a Deploy Type of <code>DBRM</code>. Likewise, the members in <code>IBMUSER.DBB.GENAPP.LOAD</code> are all CICS Load Modules and have a Deploy Type of <code>LOAD</code>. The CICS Load artifacts that end in <code>01</code> are existing CICS Load Modules and need to be NEWCOPYed. The CICS Load artifacts that end in <code>RG</code> are new CICS Load Modules that do not need to be NEWCOPYed. Trying to run our NEWCOPY process on these new CICS Loads would result in the NEWCOPY process failing. So how do we set up our process to only NEWCOPY the existing CICS Loads? Let&#x27;s look at the next section to see the process that can handle this. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-process"></a>The Process<a class="hash-link" href="#the-process" title="Direct link to heading">#</a></h2><p><img alt="Process Top Level Screenshot" src="/zUCD-docs/assets/images/process-top-level-screenshot-c9a7781fda4af670489f7c5542dfbcf8.png">
Above is a screen shot of the UCD Deployment process that I used to deploy the version shown in the <a href="#the-component-version">component version</a> section. The process handles activites like downloading the artifacts to our deployment targert envrionment, putting those artifacts in the correct PDSs, then handling performing the necessary BINDS and NEWCOPYs. Since this blog post focuses on how to handling performing NEWCOPYs on CICS Load Modules that are updates to already loaded CICS Loads and skip the NEWCOPY process on net new CICS Loads we will gloss over the <strong>Download Artifacts for zOS</strong> &amp; <strong>Deploy Data Sets</strong> steps. These two steps take care of downloading the artifacts from our artifact repo and then placing the artifacts in the proper PDSs. We&#x27;ll also gloss over the <strong>GenBndCard</strong> &amp; <strong>Bind Package &amp; Plan</strong> steps. These two steps generate a list of BIND Packages from the DBRMs in our version then performs the BINDS. The steps in the deployment process we will focus on are the <a href="#generate-program-list"><strong>Generate Program List</strong></a>, <a href="#check-if-new-member"><strong>check-if-new-member</strong></a>, <a href="#if-cics-loads-to-newcopy"><strong>if cics loads to newcopy</strong></a>, and <a href="#newcoyp-programs"><strong>NEWCOPY Programs</strong></a> steps. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="generate-program-list"></a>Generate Program List<a class="hash-link" href="#generate-program-list" title="Direct link to heading">#</a></h3><p>This step uses the <a href="https://www.urbancode.com/plugindoc/z-os-utility-2#generate_artifact_information" target="_blank" rel="noopener noreferrer">Generate Artifact Information</a> step from the <a href="https://www.urbancode.com/plugin/z-os-utility/" target="_blank" rel="noopener noreferrer">z/OS Utility</a> plugin. For this step the <code>For Each</code> option should be set to <code>PDS Member</code>. This tells the step to generate a list based on all the PDS Members in the version. The <code>Deploy Type Filter</code> option should be set to <code>/.*LOAD/</code>. This option tells the step to only include PDS Members in the list that haev a Deploy Type property that matches the regex pattern <code>/.*LOAD/</code>, mean out list will only contan entries for our CICS Loads in the version. The last step option we have to set is the <code>Template</code> option. This should be set to <code>${member},</code>. This field tells the step to use the member name of each artifact as the entry in the list, followed by a comma to seperate each entry. The rest of the options for this step can eiher be left as their default or just left blank. Using these options will have the step generate an ouput property of <code>text</code> that contains a comma seperated list of the CICS Loads in the version being deployed.
<img alt="Generate Program List Output Properties" src="/zUCD-docs/assets/images/generate-program-list-output-properties-8b0a5d77eb54ea7bdd2a59ca0e75b3eb.png">
Now this output property can be used as an input for other steps. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check-if-new-member"></a>check-if-new-member<a class="hash-link" href="#check-if-new-member" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="if-cics-loads-to-newcopy"></a>if cics loads to newcopy<a class="hash-link" href="#if-cics-loads-to-newcopy" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="newcoyp-programs"></a>NEWCOYP Programs<a class="hash-link" href="#newcoyp-programs" title="Direct link to heading">#</a></h3></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><a class="margin-horiz--sm" href="/zUCD-docs/blog/tags/ucd">UCD</a><a class="margin-horiz--sm" href="/zUCD-docs/blog/tags/z">Z</a><a class="margin-horiz--sm" href="/zUCD-docs/blog/tags/dev-ops">DevOps</a><a class="margin-horiz--sm" href="/zUCD-docs/blog/tags/cics">CICS</a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zUCD-docs/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zUCD-docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/ronniegeraghty/zUCD-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/zUCD-docs/assets/js/runtime~main.e160fb1e.js"></script>
<script src="/zUCD-docs/assets/js/main.70779efb.js"></script>
</body>
</html>